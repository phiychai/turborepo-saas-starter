---
title: 'Git Flow Strategy'
description: 'Complete guide to the git workflow and branching strategy for collaborative development'
navigation:
  title: 'Git Flow'
  order: 0
---

# Git Flow Strategy

This project uses a Git Flow-based branching strategy optimized for collaborative development, continuous integration, and safe production deployments.

## Branch Structure

### Main Branches

#### `main` - Production Branch
- **Purpose**: Contains production-ready, stable code
- **Protection**: Protected branch requiring pull request reviews
- **Deployment**: Auto-deploys to production on merge
- **Merge Policy**: Only merged from `develop` or `hotfix` branches
- **CI/CD**: Runs full test suite and deploys to production

#### `develop` - Integration Branch
- **Purpose**: Integration branch for completed features
- **CI/CD**: Runs full CI pipeline (lint, type-check, build, test)
- **Merge Policy**: All feature branches merge here first
- **Usage**: Used for staging/testing before production release

### Supporting Branches

#### Feature Branches - `feature/description`
- **Purpose**: Develop new features
- **Created from**: `develop`
- **Merged to**: `develop` via Pull Request
- **Naming**: Use descriptive names like `feature/user-authentication`, `feature/payment-integration`
- **Lifespan**: Deleted after merge

#### Hotfix Branches - `hotfix/description`
- **Purpose**: Critical production fixes that need immediate attention
- **Created from**: `main`
- **Merged to**: Both `main` and `develop`
- **Naming**: Use descriptive names like `hotfix/security-patch`, `hotfix/payment-bug`
- **Lifespan**: Deleted after merge to both branches

#### Release Branches - `release/v1.x.x` (Optional)
- **Purpose**: Prepare new production releases
- **Created from**: `develop` when ready to release
- **Merged to**: `main` (tagged) and back to `develop`
- **Usage**: Final testing, bug fixes, version bumps
- **Lifespan**: Deleted after merge

## Development Workflow

### Starting a New Feature

```bash
# 1. Ensure you're on the latest develop branch
git checkout develop
git pull origin develop

# 2. Create a new feature branch
git checkout -b feature/user-authentication

# 3. Make your changes and commit using conventional commits
git add .
git commit -m 'feat(auth): add user login functionality'
git commit -m 'test(auth): add login component tests'
git commit -m 'docs(auth): update authentication documentation'

# 4. Push the branch to remote
git push origin feature/user-authentication

# 5. Open a Pull Request: feature/user-authentication → develop
```

### Feature Development Best Practices

1. **Keep branches focused**: One feature per branch
2. **Commit frequently**: Small, logical commits
3. **Use conventional commits**: See [Commit Message Convention](#commit-message-convention)
4. **Keep up to date**: Regularly rebase or merge from `develop`
5. **Run tests locally**: `pnpm lint && pnpm test` before pushing

### Updating Feature Branch from Develop

```bash
# Option 1: Rebase (cleaner history)
git checkout feature/user-authentication
git fetch origin
git rebase origin/develop
git push origin feature/user-authentication --force-with-lease

# Option 2: Merge (preserves history)
git checkout feature/user-authentication
git fetch origin
git merge origin/develop
git push origin feature/user-authentication
```

### Completing a Feature

```bash
# 1. Ensure all tests pass locally
pnpm lint
pnpm type-check
pnpm test
pnpm build

# 2. Push final changes
git push origin feature/user-authentication

# 3. Create Pull Request: feature/user-authentication → develop
# 4. Wait for CI checks to pass
# 5. Get code review approval
# 6. Merge PR (squash or merge commit based on team preference)
# 7. Delete feature branch after merge
```

## Hotfix Workflow

Hotfixes are for critical production issues that need immediate fixes.

### Creating a Hotfix

```bash
# 1. Start from main branch
git checkout main
git pull origin main

# 2. Create hotfix branch
git checkout -b hotfix/critical-security-fix

# 3. Make the fix and commit
git add .
git commit -m 'fix(security): patch XSS vulnerability in user input'

# 4. Push hotfix branch
git push origin hotfix/critical-security-fix

# 5. Create Pull Request: hotfix/critical-security-fix → main
```

### Completing a Hotfix

```bash
# 1. After PR is approved and merged to main
# 2. Production deployment triggers automatically

# 3. Merge hotfix back to develop
git checkout develop
git pull origin develop
git merge main
git push origin develop

# 4. Delete hotfix branch
git branch -d hotfix/critical-security-fix
git push origin --delete hotfix/critical-security-fix
```

## Release Workflow

Use release branches when preparing a new version for production.

### Creating a Release

```bash
# 1. Start from develop
git checkout develop
git pull origin develop

# 2. Create release branch
git checkout -b release/v1.2.0

# 3. Final testing and version updates
# Update version numbers, changelog, etc.
git commit -m 'chore(release): bump version to 1.2.0'
git commit -m 'docs(release): update changelog for v1.2.0'

# 4. Push release branch
git push origin release/v1.2.0

# 5. Create Pull Request: release/v1.2.0 → main
```

### Completing a Release

```bash
# 1. After PR is approved and merged to main
git checkout main
git pull origin main

# 2. Tag the release
git tag -a v1.2.0 -m "Release version 1.2.0"
git push origin v1.2.0
# This triggers the release.yml workflow automatically

# 3. Merge back to develop
git checkout develop
git pull origin develop
git merge main
git push origin develop

# 4. Delete release branch
git branch -d release/v1.2.0
git push origin --delete release/v1.2.0
```

## Commit Message Convention

This project uses [Conventional Commits](https://www.conventionalcommits.org/) for consistent commit messages.

### Format

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

### Types

- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation changes
- `style`: Code style changes (formatting, missing semicolons, etc.)
- `refactor`: Code refactoring
- `test`: Adding or updating tests
- `chore`: Maintenance tasks (dependencies, build config, etc.)
- `perf`: Performance improvements
- `ci`: CI/CD changes

### Scope

Scope indicates the area of the codebase affected:

- `web`: Frontend (Nuxt app)
- `backend`: Backend API (AdonisJS)
- `cms`: Directus CMS configuration
- `shared`: Shared packages
- `deps`: Dependencies
- `config`: Configuration files

### Examples

```bash
# Feature
git commit -m 'feat(web): add user dashboard component'
git commit -m 'feat(backend): implement payment webhook handler'

# Bug fix
git commit -m 'fix(auth): resolve token expiration issue'
git commit -m 'fix(web): correct mobile navigation menu'

# Documentation
git commit -m 'docs(readme): update installation instructions'
git commit -m 'docs(api): add endpoint documentation'

# Tests
git commit -m 'test(auth): add login integration tests'
git commit -m 'test(web): add component unit tests'

# Refactoring
git commit -m 'refactor(backend): simplify user service logic'
git commit -m 'refactor(web): extract reusable form components'

# Chores
git commit -m 'chore(deps): update dependencies to latest versions'
git commit -m 'chore(ci): add new test job to workflow'

# Breaking changes (use ! after type)
git commit -m 'feat(api)!: change authentication endpoint structure'
```

### Multi-line Commits

For more detailed commits:

```bash
git commit -m 'feat(web): add user profile page

- Add profile view component
- Implement profile editing functionality
- Add avatar upload feature
- Update user service to handle profile updates

Closes #123'
```

## Pull Request Process

### Creating a Pull Request

1. **Ensure CI passes**: All checks must be green
2. **Write clear description**: Explain what and why
3. **Link issues**: Reference related issues (e.g., `Closes #123`)
4. **Add screenshots**: For UI changes
5. **Request reviewers**: Tag relevant team members

### PR Template

```markdown
## Description
Brief description of changes

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing
- [ ] Tests pass locally
- [ ] Added new tests
- [ ] Updated existing tests

## Checklist
- [ ] Code follows style guidelines
- [ ] Self-review completed
- [ ] Comments added for complex code
- [ ] Documentation updated
- [ ] No new warnings generated
```

### Review Process

1. **Automated checks**: CI must pass (lint, type-check, build, test)
2. **Code review**: At least one approval required
3. **Address feedback**: Make requested changes
4. **Re-request review**: After addressing feedback
5. **Merge**: Once approved, merge using appropriate strategy

## Branch Protection Rules

### Main Branch Protection

Configure in GitHub Settings → Branches:

- ✅ **Require pull request reviews**: Minimum 1 approval
- ✅ **Require status checks to pass**:
  - `Lint`
  - `Type Check`
  - `Build`
  - `Test`
- ✅ **Require branches to be up to date**: Before merging
- ✅ **Require conversation resolution**: All comments resolved
- ❌ **Allow force pushes**: Disabled
- ❌ **Allow deletions**: Disabled

### Develop Branch Protection (Recommended)

- ✅ **Require pull request reviews**: Minimum 1 approval
- ✅ **Require status checks to pass**: Same as main
- ✅ **Require branches to be up to date**: Before merging
- ❌ **Allow force pushes**: Disabled

## CI/CD Integration

### Continuous Integration

The CI workflow runs on:
- Push to `main` or `develop`
- Pull requests to `main` or `develop`

**Jobs**:
- **Lint**: ESLint and Prettier checks
- **Type Check**: TypeScript validation
- **Build**: Production builds for all apps
- **Test**: Run test suite with coverage

### Continuous Deployment

#### Preview Deployments
- **Trigger**: Pull requests to `main`
- **Purpose**: Preview environment for testing
- **URL**: `https://preview-{PR_NUMBER}.example.com`

#### Production Deployment
- **Trigger**: Push to `main` branch
- **Purpose**: Deploy to production environment
- **Process**: Sequential deployment (web first, then backend)

### Release Automation

- **Trigger**: Git tags matching `v*` (e.g., `v1.0.0`)
- **Actions**:
  - Create GitHub release
  - Generate changelog
  - Package build artifacts
  - Publish release notes

## Common Workflows

### Daily Development

```bash
# Morning: Sync with latest changes
git checkout develop
git pull origin develop

# Start feature
git checkout -b feature/my-feature

# Work and commit
git add .
git commit -m 'feat(scope): description'
git push origin feature/my-feature

# End of day: Keep branch updated
git fetch origin
git rebase origin/develop
```

### Handling Merge Conflicts

```bash
# When rebasing
git rebase origin/develop
# Resolve conflicts in files
git add <resolved-files>
git rebase --continue

# When merging
git merge origin/develop
# Resolve conflicts in files
git add <resolved-files>
git commit
```

### Undoing Changes

```bash
# Undo last commit (keep changes)
git reset --soft HEAD~1

# Undo last commit (discard changes)
git reset --hard HEAD~1

# Undo specific file changes
git checkout -- <file>

# Undo staged changes
git reset HEAD <file>
```

## Best Practices

### Do's ✅

- ✅ Create feature branches from `develop`
- ✅ Use descriptive branch names
- ✅ Write clear commit messages
- ✅ Keep commits focused and atomic
- ✅ Run tests before pushing
- ✅ Keep feature branches up to date
- ✅ Delete merged branches
- ✅ Use pull requests for all merges
- ✅ Review your own code before requesting review

### Don'ts ❌

- ❌ Commit directly to `main` or `develop`
- ❌ Force push to shared branches
- ❌ Merge without PR approval
- ❌ Leave branches unmerged for too long
- ❌ Mix unrelated changes in one commit
- ❌ Skip running tests locally
- ❌ Ignore CI failures
- ❌ Merge broken code to `develop`

## Troubleshooting

### Branch is behind develop

```bash
# Update your feature branch
git checkout feature/my-feature
git fetch origin
git rebase origin/develop
# Resolve any conflicts
git push origin feature/my-feature --force-with-lease
```

### Accidentally committed to main/develop

```bash
# Create a branch from current state
git checkout -b feature/fix-accidental-commit

# Reset main/develop to previous commit
git checkout main
git reset --hard origin/main

# Apply your changes properly
git checkout feature/fix-accidental-commit
# Continue with normal workflow
```

### Need to update a merged PR

```bash
# If PR is already merged, create a new branch
git checkout develop
git pull origin develop
git checkout -b fix/additional-changes
# Make changes and create new PR
```

## Summary

### Quick Reference

| Branch Type | Created From | Merged To | Purpose |
|------------|--------------|-----------|---------|
| `feature/*` | `develop` | `develop` | New features |
| `hotfix/*` | `main` | `main` + `develop` | Critical fixes |
| `release/*` | `develop` | `main` + `develop` | Release preparation |
| `main` | - | - | Production |
| `develop` | - | - | Integration |

### Workflow Summary

1. **Feature Development**: `feature/*` → `develop` → `main`
2. **Hotfixes**: `hotfix/*` → `main` + `develop`
3. **Releases**: `release/*` → `main` (tagged) + `develop`
4. **All merges**: Via Pull Requests
5. **CI/CD**: Automatic on push/PR
6. **Production**: Auto-deploys from `main`

## Additional Resources

- [Conventional Commits](https://www.conventionalcommits.org/)
- [Git Flow Documentation](https://nvie.com/posts/a-successful-git-branching-model/)
- [GitHub Branch Protection](https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-protected-branches)
- [CI/CD Workflows](./.github/workflows/README.md)

