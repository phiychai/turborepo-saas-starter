---
title: 'Package Structure'
description: 'Monorepo organization and package management'
navigation:
  title: 'Package Structure'
  order: 3
---

This document explains the organization of packages in the monorepo.

## Directory Structure

```
app-platform/
├── apps/                    # Applications
│   ├── backend/            # AdonisJS API server
│   ├── cms/                # Directus CMS
│   └── web/                # Nuxt.js frontend
│
└── packages/               # Shared packages (workspace:* dependencies)
    ├── eslint-config/      # ESLint & Prettier configuration
    ├── shared-config/      # Shared configuration files
    ├── shared-types/       # Shared TypeScript types
    └── shared-utils/       # Shared utility functions
```

## Package Organization

### `apps/` - Applications

Contains standalone applications that can be deployed independently.

**Naming:** Descriptive names (e.g., `backend`, `web`, `cms`)

**Characteristics:**
- Can be built and deployed independently
- May depend on packages from `packages/`
- Have their own `package.json` with dependencies
- Typically have `"private": true` in package.json

### `packages/` - Shared Packages

Contains shared code and configuration used across multiple apps.

**Naming:** Prefixed with package scope (e.g., `@app-platform/eslint-config`)

**Characteristics:**
- Reusable across multiple apps
- Versioned and managed as internal packages
- Use `workspace:*` protocol in app dependencies
- Can depend on other packages

## Turborepo Conventions

Following standard Turborepo practices:

1. **`packages/`** - Shared libraries and tools that are packages
2. **`apps/`** - Individual applications
3. **No `tools/` directory** - Build tools go in packages if they're reusable

## Package Details

### `@app-platform/eslint-config`

**Location:** `packages/eslint-config/`

**Purpose:** Shared ESLint and Prettier configuration

**Exports:**
- `@app-platform/eslint-config` - Base config
- `@app-platform/eslint-config/typescript` - TypeScript config
- `@app-platform/eslint-config/vue` - Vue/Nuxt config
- `@app-platform/eslint-config/node` - Node.js config
- `@app-platform/eslint-config/prettier.config.js` - Prettier config

**Used by:** All apps and packages

### `shared-config`

**Location:** `packages/shared-config/`

**Purpose:** Shared configuration files (TypeScript, etc.)

**Exports:**
- `tsconfig.base.json` - Base TypeScript configuration

**Used by:** All TypeScript projects

### `shared-types`

**Location:** `packages/shared-types/`

**Purpose:** Shared TypeScript type definitions

**Exports:**
- Type definitions used across apps
- Schema definitions

**Used by:** All TypeScript applications

### `shared-utils`

**Location:** `packages/shared-utils/`

**Purpose:** Shared utility functions

**Exports:**
- Common utility functions
- Helper methods

**Used by:** All applications

## Workspace Dependencies

Packages are referenced using the `workspace:*` protocol:

```json
{
  "dependencies": {
    "@app-platform/eslint-config": "workspace:*",
    "shared-types": "workspace:*"
  }
}
```

This ensures:
- Always uses the local version during development
- Proper dependency resolution in monorepo
- Faster installs (no network requests)

## Adding New Packages

### Creating a New Package

1. Create directory in `packages/`:
   ```bash
   mkdir packages/my-new-package
   ```

2. Initialize package.json:
   ```json
   {
     "name": "@app-platform/my-new-package",
     "version": "1.0.0",
     "private": true,
     "main": "index.js"
   }
   ```

3. Add to workspace (already covered by `packages/**`)

4. Install dependencies from root:
   ```bash
   pnpm install
   ```

### Using the New Package

In any app's `package.json`:

```json
{
  "dependencies": {
    "@app-platform/my-new-package": "workspace:*"
  }
}
```

Then run `pnpm install` to link it.

## Package vs App Decision

**Create a Package when:**
- Code is shared between 2+ apps
- It's a configuration (ESLint, TypeScript, etc.)
- It's a utility library
- It defines shared types

**Create an App when:**
- It's a deployable application
- It has its own server/runtime
- It's a standalone service
- It's an end-user application

## Build Order

Turborepo automatically handles build order based on dependencies:

```
packages/shared-types (builds first)
    ↓
packages/shared-utils (depends on shared-types)
    ↓
apps/backend (depends on shared-types, shared-utils)
apps/web (depends on shared-types, shared-utils)
```

## Why Not `tools/`?

Following Turborepo best practices:

- ❌ `tools/` suggests build scripts and one-off utilities
- ✅ `packages/` clearly indicates reusable packages
- ✅ Consistent with Turborepo examples and documentation
- ✅ Better aligns with other monorepo tools (Nx, Lerna, etc.)

If you have build scripts or one-off tools, they can go in:
- `scripts/` at root level (for monorepo-wide scripts)
- `scripts/` in individual apps (for app-specific scripts)

## References

- [Turborepo Documentation](https://turbo.build/repo/docs)
- [pnpm Workspaces](https://pnpm.io/workspaces)
- [Monorepo Handbook](https://monorepo.tools/)

